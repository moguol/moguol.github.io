<!DOCTYPE html>
<html lang="zh-Hant-TW">

	

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title> 墨 痕 </title>
	<meta property="og:title" content=" 建站记 | Hexo " />
	<meta name="twitter:title" content=" 建站记 | Hexo ">

	<meta property="og:type" content="article">
	<meta name="twitter:card" content="summary">

	<meta name="description" content=" 建站记 | Hexo ">
	<meta property="og:description" content=" 建站记 | Hexo " />
	<meta name="twitter:description" content=" 建站记 | Hexo " />

	<link rel="icon" type="image/x-icon" href="http://yoursite.com/asset/img/favicon.png">

	<link rel="image_src" href="http://yoursite.com/asset/img/logo.png" >
	<meta property="og:image" content="http://yoursite.com/asset/img/logo.png" />

	
	<link href="http://yoursite.com/atom.xml" title="Hexo" type="application/atom+xml" rel="alternative">
	

	<link rel="canonical" href="/2015/03/22/build-blog/index.html">

	<link rel="stylesheet" href="/asset/css/main.css">

</head>


<body>

	
	<header class="site-header">

		
		<nav class="nav-page">

			<div class="row">

				<ul>

					

					<li><a href="/">Home</a></li>

					

					<li><a href="/archives">Sitemap</a></li>

					

					<li><a href="/atom.xml">Rss</a></li>

					

				</ul>

			</div>

		</nav>


		<div class="site-header-main">

			<div class="row">

				<h1><a href="/">墨 痕</a></h1>
				<h6><a href="/">fatesai#gmail.com</a></h6>

				

			</div>

		</div>

		


		<nav class="nav-cat">

			<div class="row">

				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP/IP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li></ul>

			</div>

		</nav>




	</header>


	<div id="content" class="site-content">

		
		<div class="row content-post">
			<article itemscope itemtype="http://schema.org/Article">

				

				

				<p class="content-meta">
					<span class="meta-date" itemprop="datePublished" content="2015-03-22">2015-03-22</span>

					
				</p>

				

					<h2 class="content-title">
						<a href="/2015/03/22/build-blog/" itemprop="url"><span itemprop="name">建站记</span></a>
					</h2>

				


				<div class="content" itemprop="articleBody">
					<p>&emsp;零碎记录一下此博客的建立过程，基础说明如下：</p>
<ul>
<li>系统：Ubuntu 14.04 32位</li>
<li>博客框架：<a href="http://hexo.io/" target="_blank" rel="external">hexo</a></li>
<li>主题：Nadya</li>
<li>代码仓库：Github</li>
</ul>
<p>&emsp;基本情况就这样，以下是详细建站过程记录。。。    </p>
<h2 id="安装NodeJS"><strong>安装NodeJS</strong></h2><p>&emsp;因为hexo是基于NodeJS开发的，所以需要先安装NodeJS相关的环境。最方便快捷的方法是直接使用apt-get安装，如果安装失败那很可能是源的问题需要在网上找到一个合适可用的源。直接执行以下命令进行安装：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="operator"><span class="keyword">install</span> nodejs</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> npm</span></span><br></pre></td></tr></table></figure></p>
<h2 id="安装hexo"><strong>安装hexo</strong></h2><p>&emsp;如果你是采用apt-get安装的NodeJS，那么必须先要建立一个软链接。因为使用apt-get方式安装的NodeJS命令为<code>/usr/bin/nodejs</code>，但在安装hexo的过程中hexo是寻找<code>/usr/bin/node</code>命令。若不事先建立软链接，那么在安装hexo的过程会报错<code>无法找到node命令</code><br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s <span class="regexp">/usr/</span>bin<span class="regexp">/nodejs /u</span>sr<span class="regexp">/bin/</span>node</span><br><span class="line">sudo npm install -g hexo</span><br></pre></td></tr></table></figure></p>
<h2 id="初始化hexo"><strong>初始化hexo</strong></h2><p>&emsp;安装完hexo后，建立目录用于存放博客程序并在此目录对hexo进行初始化操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog_dir &amp;&amp; hexo init</span><br><span class="line">sudo npm install</span><br></pre></td></tr></table></figure></p>
<h2 id="生成静态页面"><strong>生成静态页面</strong></h2><p>&emsp;初始化hexo后，需要使用<code>hexo g</code>命令生成相关的静态页面文件。<code>hexo g</code>命令是<code>hexo generate</code>的简写<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g	<span class="keyword">or</span>	hexo <span class="keyword">ge</span><span class="label">nerate</span></span><br></pre></td></tr></table></figure></p>
<h2 id="本地启动"><strong>本地启动</strong></h2><p>&emsp;使用<code>hexo g</code>后会在目录下生成许多博客相关的目录及文件，成功生成文件后一个默认的hexo博客就已经建好了，只需要在本地启动hexo即可浏览博客<br><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s	<span class="keyword">or</span>	hexo <span class="built_in">server</span></span><br></pre></td></tr></table></figure></p>
<h2 id="hexo主题"><strong>hexo主题</strong></h2><p>&emsp;hexo默认使用<code>landscape</code>主题，可以到<a href="https://github.com/hexojs/hexo/wiki/themes" target="_blank" rel="external">这里</a>选着自己喜欢的主题并根据自己喜好对主题进行修改(需要懂点前端知识)。安装主题和后续需要使用到Github，所以先安装Github<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="keyword">get</span> install git-core</span><br></pre></td></tr></table></figure></p>
<p>&emsp;使用Github安装主题，主题将会被安装在<code>blog_dir/themes</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="tag">&lt;<span class="title">theme-gitgub-url</span>&gt;</span> themes/<span class="tag">&lt;<span class="title">theme-name</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>&emsp;在配置文件<code>_config.yml</code>中指定主题<br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">theme</span>: <span class="string">&lt;theme-name&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="配置RSS订阅"><strong>配置RSS订阅</strong></h2><p>&emsp;hexo默认是没有RSS订阅功能的，需要自己配置。先安装hexo的RSS订阅插件<code>hexo-generator-feed</code>：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="operator"><span class="keyword">install</span> hexo-generator-feed <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure></p>
<p>&emsp;在<code>&lt;blog_dir&gt;/_config.yml</code>配置文件的最后添加RSS订阅的相关配置项，注意<code>-</code>后有一个<code>空格</code>：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line"><span class="bullet">- </span>hexo-generator-feed</span><br></pre></td></tr></table></figure></p>
<p>&emsp;完成后使用<code>hexo g</code>生成RSS订阅文件<code>atom.xml</code>，生成的xml文件会存放在<code>&lt;blog_dir&gt;/public/atom.xml</code>，如果存在此文件则说明成功。直接访问<code>http://域名/atom.xml</code>或将其嵌入到博客代码中即可</p>
<h2 id="添加categories配置项"><strong>添加categories配置项</strong></h2><p>&emsp;一般使用<a href="https://zh.wikipedia.org/zh/Markdown" target="_blank" rel="external">Markdown</a>写文章可以用<strong><code>hexo n &quot;article title&quot;</code></strong>命令生成一个md文件。生成的md文件会存放在<code>&lt;blog_dir/source/_posts</code>目录下，默认会有如下内容：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: "article title"</span><br><span class="line">date: xxxx-xx-xx xx:xx:xx</span><br><span class="line"><span class="header">tags: </span><br><span class="line">---</span></span><br></pre></td></tr></table></figure></p>
<p><code>title</code>即文件的标题；<code>tags</code>即标签，如果需要写<strong>多个标签<code>[tag1, tag2]</code></strong>，<em>注意冒号后必须有一个空格</em>；但我想要默认添加一个分类<code>categories</code>的配置<br><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">vim <span class="tag">&lt;<span class="title">blog_dir</span>&gt;</span>/scaffolds/post.md</span><br><span class="line">添加一行categories:，添加后：</span><br><span class="line">	title: </span><span class="expression">&#123;&#123; <span class="variable">title</span> &#125;&#125;</span><span class="xml"></span><br><span class="line">	date: </span><span class="expression">&#123;&#123; <span class="variable">date</span> &#125;&#125;</span><span class="xml"></span><br><span class="line">	categories:</span><br><span class="line">	tags:</span><br><span class="line">	---</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Github配置"><strong>Github配置</strong></h2><p>&emsp;写好的博客内容最终是要上传到Github的，又不想每次发布的时候都需要输入Github相关的账号及密码。所以要对Github做一些配置。首先需要有一个Github账号，没有的需要<a href="https://github.com/join" target="_blank" rel="external">注册</a>。<br>配置ssh免密码登录<br><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"注册邮箱"</span></span><br></pre></td></tr></table></figure></p>
<p>&emsp;添加SSH keys<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">登录Github——&gt;setting——&gt;SSH <span class="built_in">keys</span>——&gt;Add SSH <span class="built_in">key</span></span><br><span class="line">将~/.ssh/id_rsa.pub的内容复制到Github上</span><br></pre></td></tr></table></figure></p>
<p>&emsp;测试ssh无密码连接Github<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line">第一次手动输入<span class="string">"yes"</span>后显示如下内容则设置成功：</span><br><span class="line">The authenticity <span class="keyword">of</span> host <span class="attribute">'github</span>.com ' can<span class="attribute">'t</span> be established.</span><br><span class="line">RSA key fingerprint <span class="keyword">is</span> xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">Are you sure you want <span class="keyword">to</span> continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added <span class="attribute">'github</span>.com' (RSA) <span class="keyword">to</span> the list <span class="keyword">of</span> known hosts.</span><br><span class="line">Hi username! You<span class="attribute">'ve</span> successfully authenticated, but GitHub does <span class="keyword">not</span> provide shell <span class="keyword">access</span>.</span><br></pre></td></tr></table></figure></p>
<p>&emsp;Github账号相关配置<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user<span class="class">.name</span> <span class="string">"Github注册用户名"</span></span><br><span class="line">git config --global user<span class="class">.email</span> <span class="string">"Github注册邮箱"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="创建博客Github项目"><strong>创建博客Github项目</strong></h2><p>&emsp;需要在Github上创建一个项目用于存放博客的内容.<strong>Repository name必须是<code>用户名.github.io</code></strong><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录Github——&gt;New Repository——&gt;Repository <span class="function"><span class="title">name</span><span class="params">(必须是:用户名.github.io)</span></span></span><br></pre></td></tr></table></figure></p>
<h2 id="hexo发布博客配置"><strong>hexo发布博客配置</strong></h2><p>&emsp;想要通过hexo发布博客到Github上需要安装<code>hexo-deployer-git</code>插件<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="operator"><span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure></p>
<p>&emsp;配置_config.yml。<code>repository</code>必须写成<code>git@github.com:用户名/用户名.github.io.git</code>这种形式，如果写成url形式<code>https://github.com/用户名/用户名.github.io.git</code>则每次发布时都要输入Github的用户名及密码!<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">	<span class="attribute">type</span>: git</span><br><span class="line">	<span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:用户名/用户名.github.io.git</span><br><span class="line">	<span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure></p>
<p>&emsp;写完博客后通过命令<code>hexo d</code>进行发布，通过域名<code>https://用户名.github.io/</code>进行访问博客</p>
<h2 id="写博客流程"><strong>写博客流程</strong></h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">n</span> <span class="string">"article name"</span>			生成Markdown文件并用Markdown格式写博客</span><br><span class="line">hexo s					本地启动hexo查看博客</span><br><span class="line">hexo <span class="keyword">g</span>					生成博客页面</span><br><span class="line">hexo <span class="keyword">d</span>					发布博客</span><br></pre></td></tr></table></figure>

				</div>

				

					<div class="content-tag">

						 <a class="tag-link" href="/tags/blog/">blog</a>

					</div>

				

			</article>

			<div class="content-nav">

				
					<a href="/2015/05/23/autossh/" title="Autossh反向连接">&larr; Prev</a>
				

				
					<a href="/2015/03/12/About-this-blog/" title="About this blog">Next &rarr;</a>
				

			</div>

		</div>


	</div>

	<div class="row">
	<p class="theme">Powered: <a href="http://hexo.io/"  target="_blank">Hexo</a>, Theme: <a href="https://github.com/samwhelp/hexo-theme-nadya" target="_blank">Nadya</a> remastered from <a href="https://github.com/nadymain/hexo-theme-nadymain" target="_blank">NadyMain</a></p>
</div>

	<!-- <div class="row">
	<p class="theme">Powered: <a href="http://hexo.io/"  target="_blank">Hexo</a>, Theme: <a href="https://github.com/samwhelp/hexo-theme-nadya" target="_blank">Nadya</a> remastered from <a href="https://github.com/nadymain/hexo-theme-nadymain" target="_blank">NadyMain</a></p>
</div>
 -->

</body>
</html>
